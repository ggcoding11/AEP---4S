<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Desafio - InovaMEI</title>
    <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="../css/styleForm.css" />
    <link rel="stylesheet" href="../css/geral.css" />
  </head>
  <body>
    <nav class="navbar cor-azul" data-bs-theme="dark">
      <div class="container d-flex">
        <a
          class="navbar-brand d-flex align-items-center gap-2"
          href="home.html"
        >
          <img
            src="../img/logo_foto.png"
            alt="Logo"
            width="40"
            height="40"
            class="d-inline-block align-text-top"
          />
          <img src="../img/nome_logo.png" alt="" width="100" />
        </a>

        <div class="dropdown">
          <a
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <img
              src="../img/avatar-aluno.jpg"
              alt="Foto do Aluno"
              class="foto_perfil rounded-circle"
            />
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#">Meu Perfil</a></li>
            <li><a class="dropdown-item" href="#">Meus Desafios</a></li>
            <li><hr class="dropdown-divider" /></li>
            <li><a class="dropdown-item" href="#">Sair</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <div
        class="alert alert-success alert-dismissible fade show d-none"
        role="alert"
        id="alert-sucesso"
      >
        <strong>Sucesso!</strong> Seu pitch foi enviado e logo a empresa
        receberá uma notificação.
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>

      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="mb-4">
            <h1>
              Desafio - Empresa
              <a
                href="#"
                class="link-underline link-underline-opacity-0 link-underline-opacity-75-hover"
                >GT Foods</a
              >
            </h1>
          </div>

          <div>
            <h3>Posição atual</h3>
            <p>
              Sou proprietário da GT Foods, uma pequena empresa de alimentos
              congelados localizada em Maringá. Trabalho com uma equipe de seis
              funcionários e produzimos marmitas saudáveis que são vendidas por
              delivery e em alguns pontos de venda locais. Atualmente, gerencio
              a parte administrativa e operacional, além de cuidar dos pedidos e
              controle de estoque.
            </p>

            <h3>Meu processo de negócio atual</h3>
            <p>
              Hoje utilizamos planilhas no Excel para controlar pedidos, estoque
              e entregas. Cada funcionário preenche uma aba diferente com
              informações de produção e vendas. As planilhas são atualizadas
              manualmente no final do dia e compartilhadas por e-mail. O
              controle de entregas é feito por meio de mensagens no WhatsApp, e
              o acompanhamento financeiro é feito em outra planilha separada.
            </p>

            <h3>Problemas encontrados</h3>
            <p>
              O processo manual gera muita confusão: frequentemente os dados são
              duplicados ou preenchidos incorretamente. Além disso, nem sempre
              consigo acompanhar as atualizações em tempo real, o que causa
              atrasos na produção e nas entregas. Quando o volume de pedidos
              aumenta, torna-se difícil identificar quais produtos estão em
              falta e quanto foi realmente vendido. Isso acaba prejudicando o
              fluxo de caixa e a tomada de decisões.
            </p>

            <h3>Impacto no negócio</h3>
            <p>
              Os erros de registro e a falta de integração entre as informações
              geram desperdício de ingredientes, atrasos nas entregas e perda de
              clientes. Muitas vezes preciso comprar insumos em urgência, o que
              eleva o custo de produção. Também tenho dificuldade em saber o
              lucro real de cada mês, já que os dados ficam espalhados em
              diferentes planilhas.
            </p>

            <h3>O que gostaria que fosse facilitado</h3>
            <p>
              Gostaria de uma forma simples e automatizada de gerenciar pedidos,
              estoque e entregas em um único sistema. Algo que possa ser
              atualizado pelos funcionários em tempo real, mostrando os dados de
              forma centralizada e visual. Seria ideal se o sistema gerasse
              relatórios automáticos de vendas e consumo de insumos, para que eu
              pudesse ter uma visão mais clara do desempenho do negócio.
            </p>
          </div>

          <div class="d-flex flex-column align-items-center gap-4 mt-5">
            <img
              src="../img/imagem-enviada.jpg"
              alt="Exemplo do processo atual"
              class="img-fluid w-100 w-md-75 rounded shadow-sm"
            />
            <img
              src="../img/imagem-enviada2.jpg"
              alt="Exemplo do processo atual 2"
              class="img-fluid w-100 w-md-75 rounded shadow-sm"
            />
          </div>

          <div class="d-flex justify-content-center my-5">
            <button
              type="button"
              class="btn btn-primary btn-lg w-100 w-lg-auto"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
            >
              Responder desafio
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="pitch-form" class="needs-validation" novalidate>
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">
                Envie o seu pitch (vídeo explicativo):
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body d-flex justify-content-center">
              <input
                type="file"
                id="input-arquivo"
                accept="video/*"
                class="d-none"
                required
              />

              <label for="input-arquivo" class="upload-container text-center">
                <div id="upload-prompt">
                  <img
                    src="../img/upload.svg"
                    alt="Ícone de Upload"
                    class="img-fluid"
                    width="100"
                  />
                  <p class="mt-2 mb-0">Clique para enviar seu vídeo</p>
                  <small class="text-muted">(Formato: .mp4, .mov, etc.)</small>
                </div>

                <div id="file-feedback" class="d-none">
                  <i class="bi bi-check-circle-fill text-success fs-1"></i>
                  <p class="mt-2 mb-0 fw-semibold" id="filename"></p>
                  <small class="text-muted">Arquivo pronto para envio!</small>
                </div>
              </label>

              <div class="invalid-feedback text-center mt-2">
                Por favor, selecione um arquivo de vídeo.
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancelar
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                id="btn-enviar-pitch"
              >
                <span
                  class="spinner-border spinner-border-sm d-none"
                  role="status"
                  aria-hidden="true"
                  id="btn-pitch-spinner"
                ></span>
                <span id="btn-pitch-text">Enviar</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>

    <script>
      (() => {
        "use strict";

        // --- Seletores do Modal ---
        const pitchForm = document.getElementById("pitch-form");
        const fileInput = document.getElementById("input-arquivo");
        const modalElement = document.getElementById("exampleModal");
        const modal = new bootstrap.Modal(modalElement);

        // --- Seletores de Feedback de UI ---
        const uploadPrompt = document.getElementById("upload-prompt");
        const fileFeedback = document.getElementById("file-feedback");
        const filenameText = document.getElementById("filename");
        const successAlert = document.getElementById("alert-sucesso");

        // --- Seletores do Botão de Envio ---
        const submitButton = document.getElementById("btn-enviar-pitch");
        const buttonSpinner = document.getElementById("btn-pitch-spinner");
        const buttonText = document.getElementById("btn-pitch-text");

        // --- 1. Feedback de seleção de arquivo ---
        fileInput.addEventListener("change", () => {
          if (fileInput.files.length > 0) {
            // Se um arquivo foi selecionado
            const filename = fileInput.files[0].name;
            filenameText.textContent = filename;

            // Esconde o ícone de upload e mostra o feedback de sucesso
            uploadPrompt.classList.add("d-none");
            fileFeedback.classList.remove("d-none");

            // Remove o estado de erro, caso exista
            pitchForm.classList.remove("was-validated");
            fileInput.classList.remove("is-invalid");
          } else {
            // Se o usuário cancelou a seleção
            uploadPrompt.classList.remove("d-none");
            fileFeedback.classList.add("d-none");
          }
        });

        // --- 2. Validação e Envio do Formulário do Modal ---
        pitchForm.addEventListener(
          "submit",
          (event) => {
            event.preventDefault(); // Sempre previne o envio padrão
            event.stopPropagation();

            if (!pitchForm.checkValidity()) {
              // Se o formulário (input de arquivo) for inválido
              fileInput.classList.add("is-invalid"); // Força a exibição do erro
            } else {
              // Se o formulário FOR válido
              // Ativa o feedback de carregamento
              submitButton.disabled = true;
              buttonSpinner.classList.remove("d-none");
              buttonText.textContent = "Enviando...";

              // SIMULAÇÃO: Upload do vídeo (2.5 segundos)
              setTimeout(() => {
                // Reseta o botão
                submitButton.disabled = false;
                buttonSpinner.classList.add("d-none");
                buttonText.textContent = "Enviar";

                // Fecha o modal
                modal.hide();

                // Exibe a mensagem de sucesso no topo da página
                successAlert.classList.remove("d-none");
                // Rola a página para o topo para que o usuário veja o alerta
                window.scrollTo(0, 0);
              }, 2500);
            }

            pitchForm.classList.add("was-validated");
          },
          false
        );

        // --- 3. Resetar o formulário quando o modal for fechado ---
        modalElement.addEventListener("hidden.bs.modal", () => {
          pitchForm.classList.remove("was-validated");
          pitchForm.reset(); // Limpa o valor do input de arquivo

          // Reseta a UI de upload para o estado inicial
          uploadPrompt.classList.remove("d-none");
          fileFeedback.classList.add("d-none");
          filenameText.textContent = "";
        });
      })();
    </script>
  </body>
</html>
